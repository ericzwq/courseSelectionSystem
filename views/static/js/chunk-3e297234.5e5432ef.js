(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e297234"],{"25f0":function(e,r,t){"use strict";var s=t("6eeb"),a=t("825a"),i=t("d039"),l=t("ad6d"),o="toString",n=RegExp.prototype,u=n[o],m=i((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),c=u.name!=o;(m||c)&&s(RegExp.prototype,o,(function(){var e=a(this),r=String(e.source),t=e.flags,s=String(void 0===t&&e instanceof RegExp&&!("flags"in n)?l.call(e):t);return"/"+r+"/"+s}),{unsafe:!0})},a1a8:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-form",{ref:"ruleForm",staticClass:"r-container",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("h2",{staticClass:"r-title"},[e._v("学生选课系统-信息认证")]),t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{attrs:{size:"small",disabled:""},model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name","string"===typeof r?r.trim():r)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password","show-password":"",size:"small"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password","string"===typeof r?r.trim():r)},expression:"ruleForm.password"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[t("el-input",{attrs:{type:"password","show-password":"",size:"small"},model:{value:e.ruleForm.checkPass,callback:function(r){e.$set(e.ruleForm,"checkPass","string"===typeof r?r.trim():r)},expression:"ruleForm.checkPass"}})],1),t("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.phone,callback:function(r){e.$set(e.ruleForm,"phone",e._n(r))},expression:"ruleForm.phone"}})],1),t("email",{ref:"email",attrs:{"rule-form":e.ruleForm,params:e.emailParams,url:"public/verificationCode",level:e.level}}),t("el-form-item",{attrs:{label:"邀请码",prop:"invitation"}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.invitation,callback:function(r){e.$set(e.ruleForm,"invitation",r)},expression:"ruleForm.invitation"}})],1),t("el-form-item",{attrs:{label:"性别",prop:"sex"}},[t("el-select",{attrs:{placeholder:"请选择",size:"small",disabled:""},model:{value:e.ruleForm.sex,callback:function(r){e.$set(e.ruleForm,"sex",r)},expression:"ruleForm.sex"}},e._l(e.sexOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticClass:"r-radioBox"},[t("el-radio-group",{attrs:{disabled:""},model:{value:e.level,callback:function(r){e.level=r},expression:"level"}},[t("el-radio",{attrs:{label:"students"}},[e._v("学生")]),t("el-radio",{attrs:{label:"teachers"}},[e._v("教师")]),t("el-radio",{attrs:{label:"admins"}},[e._v("管理员")])],1)],1),t("div",{staticClass:"r-register"},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("提交认证")]),t("el-button",{staticStyle:{color:"#409EFF"},attrs:{size:"mini"},on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)},a=[],i=(t("b0c0"),t("d3b7"),t("25f0"),t("5530")),l=t("c639"),o=t("1ae0"),n={name:"register",data:function(){var e=this,r=function(e,r,t){""===r?t(new Error("请输入密码")):r.length<6?t(new Error("密码不能小于6位")):r.length>18?t(new Error("密码不能大于18位")):t()},t=function(r,t,s){""===t?s(new Error("请确认密码")):t!==e.ruleForm.password?s(new Error("两次输入密码不一致!")):s()};return{level:sessionStorage.getItem("level"),ruleForm:{name:sessionStorage.getItem("name"),password:"",checkPass:"",phone:"",email:"",verificationCode:"",sex:sessionStorage.getItem("sex"),invitation:""},sexOptions:[{value:"男",label:"男"},{value:"女",label:"女"}],emailParams:{id:sessionStorage.getItem("id")},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{max:10,message:"长度须小于或等于10",trigger:"blur"}],password:[{required:!0,validator:r,trigger:"blur"}],checkPass:[{required:!0,validator:t,trigger:"blur"}],phone:[{required:!0,validator:function(e,r,t){return r?/\d+/.test(r)?11!==r.toString().length?t("手机号长度为11"):void t():t("请输入正确的手机号"):t("请输入手机号")},trigger:"blur"}],invitation:[{required:!0,message:"请输入邀请码",trigger:"blur"},{min:3,max:54,message:"长度须在3-54",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}]},isGettingCode:!1}},mounted:function(){sessionStorage.getItem("id")&&this.level&&this.ruleForm.name||this.$router.push("/login")},methods:{submitForm:function(e){var r=this;this.$refs[e].validate((function(e){var t=sessionStorage.getItem("id");if(!t)return r.$router.push("/login");if(!e||!r.$refs["email"].validate())return console.log("error submit!!"),!1;var s=r.ruleForm,a=Object(i["a"])({codeToken:sessionStorage.getItem("codeToken")},s);delete a.name,delete a.sex,o["b"].post("/code/bindInfo",a).then((function(e){var t=e.data;0===t.status&&(r.$message.success("提交成功,3秒后跳转"),sessionStorage.setItem("phone",t.phone),sessionStorage.setItem("email",t.email),setTimeout((function(){r.$router.push(r.level)}),3e3))}))}))},resetForm:function(e){this.$refs[e].resetFields()}},components:{email:l["a"]}},u=n,m=(t("b129"),t("2877")),c=Object(m["a"])(u,s,a,!1,null,"32232532",null);r["default"]=c.exports},ad6d:function(e,r,t){"use strict";var s=t("825a");e.exports=function(){var e=s(this),r="";return e.global&&(r+="g"),e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.dotAll&&(r+="s"),e.unicode&&(r+="u"),e.sticky&&(r+="y"),r}},b129:function(e,r,t){"use strict";var s=t("e64e"),a=t.n(s);a.a},c639:function(e,r,t){"use strict";var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("el-form-item",{attrs:{label:"邮箱",prop:"email",rules:{required:!0,trigger:"blur",message:"请输入邮箱"}}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.email,callback:function(r){e.$set(e.ruleForm,"email",r)},expression:"ruleForm.email"}})],1),t("el-form-item",{attrs:{label:"验证码",prop:"verificationCode",rules:[{required:!0,trigger:"blur",message:"请输入验证码"}]}},[t("div",{staticStyle:{display:"flex","flex-wrap":"wrap","justify-content":"space-between"}},[t("el-input",{staticStyle:{"flex-basis":"40%"},attrs:{size:"small"},model:{value:e.ruleForm.verificationCode,callback:function(r){e.$set(e.ruleForm,"verificationCode",r)},expression:"ruleForm.verificationCode"}}),t("el-button",{ref:"code",staticStyle:{"flex-basis":"40%"},attrs:{type:"primary",size:"small",disabled:e.isGettingCode,loading:e.loading},on:{click:e.getVerificationCode}},[e._v("获取验证码 ")])],1)])],1)},a=[],i=t("5530"),l=t("bc3a"),o=t.n(l),n=t("1ae0"),u={name:"email",props:["ruleForm","url","params","validator","level"],data:function(){return{isGettingCode:!1,loading:!1}},methods:{getVerificationCode:function(){var e=this;if(!this.validator||this.validator()){var r=this.ruleForm.email;if(!r)return this.$message.error("请输入邮箱");if(!/\w+@\w+.\w+$/.test(r))return this.$message.error("请输入正确的邮箱");if(r.length>18)return this.$message.error("长度须小于或等于18");this.loading=!0,o.a.get(n["a"]+this.url,{params:Object(i["a"])({email:r},this.params),headers:{level:this.level}}).then((function(r){e.loading=!1;var t=r.data;if(0!==t.status)return e.$message.error(t.message);e.$message.success("验证码已发送至您的邮箱"),sessionStorage.setItem("codeToken",t.token),e.isGettingCode=!0;var s=e.$refs["code"].$el,a=60,i=setInterval((function(){a<=0?(clearInterval(i),s.innerText="重新获取",e.isGettingCode=!1):(s.innerText="重新获取("+a+"s)",a--)}),1e3)}))}},validate:function(){var e=this.ruleForm.email;if(!e)return 1===this.$message.error("请输入邮箱");if(!/\w+@\w+.com$/.test(e))return 1===this.$message.error("请输入正确的邮箱");var r=this.ruleForm.verificationCode;return r?/\d+/.test(r)?6===r.length||1===this.$message.error("验证码长度为6"):1===this.$message.error("请输入数字"):1===this.$message.error("请输入验证码")}}},m=u,c=t("2877"),d=Object(c["a"])(m,s,a,!1,null,null,null);r["a"]=d.exports},e64e:function(e,r,t){}}]);