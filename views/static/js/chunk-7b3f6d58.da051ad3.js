(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b3f6d58"],{"25f0":function(e,r,t){"use strict";var s=t("6eeb"),a=t("825a"),i=t("d039"),l=t("ad6d"),o="toString",n=RegExp.prototype,u=n[o],m=i((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),c=u.name!=o;(m||c)&&s(RegExp.prototype,o,(function(){var e=a(this),r=String(e.source),t=e.flags,s=String(void 0===t&&e instanceof RegExp&&!("flags"in n)?l.call(e):t);return"/"+r+"/"+s}),{unsafe:!0})},"27f3":function(e,r,t){"use strict";var s=t("453d"),a=t.n(s);a.a},"453d":function(e,r,t){},ad6d:function(e,r,t){"use strict";var s=t("825a");e.exports=function(){var e=s(this),r="";return e.global&&(r+="g"),e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.dotAll&&(r+="s"),e.unicode&&(r+="u"),e.sticky&&(r+="y"),r}},bcca:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-form",{ref:"ruleForm",staticClass:"r-container",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("h1",{staticClass:"r-title"},[e._v("学生选课系统-注册")]),t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name","string"===typeof r?r.trim():r)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.username,callback:function(r){e.$set(e.ruleForm,"username","string"===typeof r?r.trim():r)},expression:"ruleForm.username"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password","show-password":"",size:"small"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password","string"===typeof r?r.trim():r)},expression:"ruleForm.password"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[t("el-input",{attrs:{type:"password","show-password":"",size:"small"},model:{value:e.ruleForm.checkPass,callback:function(r){e.$set(e.ruleForm,"checkPass","string"===typeof r?r.trim():r)},expression:"ruleForm.checkPass"}})],1),t("el-form-item",{attrs:{label:"密保手机",prop:"phone"}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.phone,callback:function(r){e.$set(e.ruleForm,"phone",e._n(r))},expression:"ruleForm.phone"}})],1),t("email",{ref:"email",attrs:{"rule-form":e.ruleForm,params:e.emailParams,url:"/public/verificationCode"}}),t("el-form-item",{attrs:{label:"邀请码",prop:"invitation"}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.invitation,callback:function(r){e.$set(e.ruleForm,"invitation",r)},expression:"ruleForm.invitation"}})],1),t("el-form-item",{attrs:{label:"性别",prop:"sex"}},[t("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.ruleForm.sex,callback:function(r){e.$set(e.ruleForm,"sex",r)},expression:"ruleForm.sex"}},e._l(e.sexOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticClass:"r-radioBox"},[t("el-radio-group",{model:{value:e.level,callback:function(r){e.level=r},expression:"level"}},[t("el-radio",{attrs:{label:"students"}},[e._v("学生")]),t("el-radio",{attrs:{label:"teachers"}},[e._v("教师")]),t("el-radio",{attrs:{label:"admins"}},[e._v("管理员")])],1),t("div",[t("router-link",{staticClass:"r-login",attrs:{to:"/login"}},[e._v("登录")]),t("router-link",{staticClass:"f-register",attrs:{to:"/findPsw"}},[e._v(" 忘记密码？")])],1)],1),t("el-form-item",{staticClass:"r-register"},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("注册")]),t("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)},a=[],i=(t("b0c0"),t("d3b7"),t("25f0"),t("5530")),l=t("c639"),o={name:"register",data:function(){var e=this,r=function(e,r,t){""===r?t(new Error("请输入密码")):r.length<6?t(new Error("密码不能小于6位")):r.length>18?t(new Error("密码不能大于18位")):t()},t=function(r,t,s){""===t?s(new Error("请确认密码")):t!==e.ruleForm.password?s(new Error("两次输入密码不一致!")):s()};return{level:"students",ruleForm:{name:"",username:"",password:"",checkPass:"",phone:"",email:"",verificationCode:"",sex:"",invitation:""},sexOptions:[{value:"男",label:"男"},{value:"女",label:"女"}],emailParams:{isRegister:1},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{max:18,message:"长度须小于或等于18",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{max:18,message:"长度须小于或等于18",trigger:"blur"}],password:[{required:!0,validator:r,trigger:"blur"}],checkPass:[{required:!0,validator:t,trigger:"blur"}],phone:[{validator:function(e,r,t){return r?/\d+/.test(r)?11!==r.toString().length?t("手机号长度为11"):void t():t("请输入正确的手机号"):t("请输入手机号")},trigger:"blur"}],invitation:[{required:!0,message:"请输入邀请码",trigger:"blur"},{min:3,max:54,message:"长度须在3-54",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}]},isGettingCode:!1}},methods:{submitForm:function(e){var r=this;this.$refs[e].validate((function(e){if(!e||!r.$refs["email"].validate())return console.log("error submit!!"),!1;var t=r.ruleForm;r.axios.post("/code/register",Object(i["a"])({level:r.level,token:sessionStorage.getItem("codeToken")},t)).then((function(e){var s=e.data;0===s.status&&(r.$message.success("注册成功,3秒后跳转"),sessionStorage.setItem("routers",JSON.stringify(s.routers)),sessionStorage.setItem("token",s.token),sessionStorage.setItem("level",r.level),sessionStorage.setItem("id",s.id),sessionStorage.setItem("name",s.name),sessionStorage.setItem("sex",s.sex),sessionStorage.setItem("username",t.username),sessionStorage.setItem("phone",s.phone),sessionStorage.setItem("email",s.email),setTimeout((function(){r.$router.push(r.level)}),3e3))}))}))},resetForm:function(e){this.$refs[e].resetFields()}},components:{email:l["a"]}},n=o,u=(t("27f3"),t("2877")),m=Object(u["a"])(n,s,a,!1,null,"580d1d9f",null);r["default"]=m.exports},c639:function(e,r,t){"use strict";var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.email,callback:function(r){e.$set(e.ruleForm,"email",r)},expression:"ruleForm.email"}})],1),t("el-form-item",{attrs:{label:"验证码",prop:"verificationCode"}},[t("div",{staticStyle:{display:"flex","flex-wrap":"wrap","justify-content":"space-between"}},[t("el-input",{staticStyle:{"flex-basis":"40%"},attrs:{size:"small"},model:{value:e.ruleForm.verificationCode,callback:function(r){e.$set(e.ruleForm,"verificationCode",r)},expression:"ruleForm.verificationCode"}}),t("el-button",{ref:"code",staticStyle:{"flex-basis":"40%"},attrs:{type:"primary",size:"small",disabled:e.isGettingCode},on:{click:e.getVerificationCode}},[e._v("获取验证码 ")])],1)])],1)},a=[],i=t("5530"),l={name:"email",props:["ruleForm","url","params","validator"],data:function(){return{isGettingCode:!1}},methods:{getVerificationCode:function(){var e=this;if(!this.validator||this.validator()){var r=this.ruleForm.email;return r?/\w+@\w+.com$/.test(r)?r.length>18?this.$message.error("长度须小于或等于18"):void this.axios.get(this.url,{params:Object(i["a"])({email:r},this.params)}).then((function(r){var t=r.data;if(0===t.status){e.$message.success("验证码已发送至您的邮箱"),sessionStorage.setItem("codeToken",t.token),e.isGettingCode=!0;var s=e.$refs["code"].$el,a=60,i=setInterval((function(){a<=0?(clearInterval(i),s.innerText="重新获取",e.isGettingCode=!1):(s.innerText="重新获取("+a+"s)",a--)}),1e3)}})):this.$message.error("请输入正确的邮箱"):this.$message.error("请输入邮箱")}},validate:function(){var e=this.ruleForm.email;if(!e)return 1===this.$message.error("请输入邮箱");if(!/\w+@\w+.com$/.test(e))return 1===this.$message.error("请输入正确的邮箱");var r=this.ruleForm.verificationCode;return r?/\d+/.test(r)?6===r.length||1===this.$message.error("验证码长度为6"):1===this.$message.error("请输入数字"):1===this.$message.error("请输入验证码")}}},o=l,n=t("2877"),u=Object(n["a"])(o,s,a,!1,null,null,null);r["a"]=u.exports}}]);
//# sourceMappingURL=chunk-7b3f6d58.da051ad3.js.map