{"version":3,"sources":["webpack:///./src/components/common/login.vue?2fe6","webpack:///src/components/common/login.vue","webpack:///./src/components/common/login.vue?8294","webpack:///./src/components/common/login.vue","webpack:///./src/components/common/login.vue?a5ed"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","attrs","model","value","callback","$$v","username","expression","nativeOn","$event","type","indexOf","_k","keyCode","key","login","password","level","staticStyle","on","staticRenderFns","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,OAAO,CAACE,YAAY,eAAe,CAACF,EAAG,KAAK,CAACE,YAAY,WAAW,CAACN,EAAIO,GAAG,eAAeH,EAAG,WAAW,CAACI,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,YAAYJ,YAAY,aAAaK,MAAM,CAAC,YAAc,SAASC,MAAM,CAACC,MAAOb,EAAY,SAAEc,SAAS,SAAUC,GAAMf,EAAIgB,SAASD,GAAKE,WAAW,cAAcb,EAAG,WAAW,CAACE,YAAY,aAAaK,MAAM,CAAC,YAAc,QAAQ,gBAAgB,IAAIO,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAQrB,EAAIsB,GAAGH,EAAOI,QAAQ,QAAQ,GAAGJ,EAAOK,IAAI,SAAkB,KAAcxB,EAAIyB,MAAMN,KAAUP,MAAM,CAACC,MAAOb,EAAY,SAAEc,SAAS,SAAUC,GAAMf,EAAI0B,SAASX,GAAKE,WAAW,cAAcb,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,iBAAiB,CAACE,YAAY,UAAUM,MAAM,CAACC,MAAOb,EAAS,MAAEc,SAAS,SAAUC,GAAMf,EAAI2B,MAAMZ,GAAKE,WAAW,UAAU,CAACb,EAAG,WAAW,CAACO,MAAM,CAAC,MAAQ,aAAa,CAACX,EAAIO,GAAG,QAAQH,EAAG,WAAW,CAACO,MAAM,CAAC,MAAQ,aAAa,CAACX,EAAIO,GAAG,QAAQH,EAAG,WAAW,CAACO,MAAM,CAAC,MAAQ,WAAW,CAACX,EAAIO,GAAG,UAAU,GAAGH,EAAG,MAAM,CAACA,EAAG,cAAc,CAACwB,YAAY,CAAC,YAAY,QAAQjB,MAAM,CAAC,GAAK,aAAa,CAACX,EAAIO,GAAG,WAAWH,EAAG,cAAc,CAACE,YAAY,aAAasB,YAAY,CAAC,YAAY,QAAQjB,MAAM,CAAC,GAAK,cAAc,CAACX,EAAIO,GAAG,SAAS,IAAI,GAAGH,EAAG,MAAMA,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,YAAY,CAACE,YAAY,UAAUK,MAAM,CAAC,KAAO,WAAWkB,GAAG,CAAC,MAAQ7B,EAAIyB,QAAQ,CAACzB,EAAIO,GAAG,SAAS,IAAI,IACp8CuB,EAAkB,GCwBtB,G,8BAAA,CACE,KAAF,QACE,KAFF,WAGI,MAAJ,CACM,SAAN,GACM,SAAN,GACM,MAAN,aAGE,QAAF,CACI,MADJ,WACM,IAAN,OACM,MAAN,iDACA,iDACM,KAAN,eACM,KAAN,qBACQ,SAAR,cACQ,SAAR,cACQ,MAAR,aACA,kBACQ,EAAR,eACQ,IAAR,SACA,cACU,EAAV,gCACU,eAAV,6CACU,eAAV,yBACU,eAAV,yBACU,eAAV,mBACU,eAAV,uBACU,eAAV,+BACU,eAAV,yBAEU,YAAV,WACY,IAAZ,oBACA,4EAMc,EAAd,qCAJc,QAAd,cACc,EAAd,6BAKA,MAEU,EAAV,6BAEA,YAAQ,OAAR,gBAGE,WAAF,CACI,MAAJ,CACM,SADN,SACA,GAGQ,EAAR,yBC9E8V,I,wBCQ1VC,EAAY,eACd,EACAhC,EACA+B,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,kECnBf,yBAA2jB,EAAG","file":"static/js/chunk-5ff1f4ee.f40f45f6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticClass:\"l-container\"},[_c('h1',{staticClass:\"l-title\"},[_vm._v(\"学生选课系统-登录\")]),_c('el-input',{directives:[{name:\"focus\",rawName:\"v-focus\"}],staticClass:\"l-username\",attrs:{\"placeholder\":\"请输入账号\"},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_c('el-input',{staticClass:\"l-password\",attrs:{\"placeholder\":\"请输入密码\",\"show-password\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.login($event)}},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('div',{staticClass:\"l-radioBox\"},[_c('el-radio-group',{staticClass:\"l-radio\",model:{value:(_vm.level),callback:function ($$v) {_vm.level=$$v},expression:\"level\"}},[_c('el-radio',{attrs:{\"label\":'students'}},[_vm._v(\"学生\")]),_c('el-radio',{attrs:{\"label\":'teachers'}},[_vm._v(\"教师\")]),_c('el-radio',{attrs:{\"label\":'admins'}},[_vm._v(\"管理员\")])],1),_c('div',[_c('router-link',{staticStyle:{\"font-size\":\"14px\"},attrs:{\"to\":\"/findPsw\"}},[_vm._v(\"忘记密码？\")]),_c('router-link',{staticClass:\"l-register\",staticStyle:{\"font-size\":\"14px\"},attrs:{\"to\":\"/register\"}},[_vm._v(\"注册\")])],1)],1),_c('br'),_c('div',{staticClass:\"l-button\"},[_c('el-button',{staticClass:\"l-login\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.login}},[_vm._v(\"登录\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <form class=\"l-container\">\r\n    <h1 class=\"l-title\">学生选课系统-登录</h1>\r\n    <el-input v-model=\"username\" placeholder=\"请输入账号\" class=\"l-username\" v-focus></el-input>\r\n    <el-input placeholder=\"请输入密码\" v-model=\"password\" show-password class=\"l-password\"\r\n              @keyup.enter.native=\"login\"></el-input>\r\n    <div class=\"l-radioBox\">\r\n      <el-radio-group v-model=\"level\" class=\"l-radio\">\r\n        <el-radio :label=\"'students'\">学生</el-radio>\r\n        <el-radio :label=\"'teachers'\">教师</el-radio>\r\n        <el-radio :label=\"'admins'\">管理员</el-radio>\r\n      </el-radio-group>\r\n      <div>\r\n        <router-link to=\"/findPsw\" style=\"font-size: 14px\">忘记密码？</router-link>\r\n        <router-link to=\"/register\" style=\"font-size: 14px\" class=\"l-register\">注册</router-link>\r\n      </div>\r\n    </div>\r\n    <br>\r\n    <div class=\"l-button\">\r\n      <el-button type=\"primary\" @click=\"login\" class=\"l-login\">登录</el-button>\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"login\",\r\n    data() {\r\n      return {\r\n        username: '',\r\n        password: '',\r\n        level: 'students'\r\n      };\r\n    },\r\n    methods: {\r\n      login() {\r\n        if (this.username === '') return this.$message.error('请输入用户名')\r\n        if (this.password === '') return this.$message.error('请输入密码')\r\n        this.loading()\r\n        this.axios.post('/login', {\r\n          username: this.username,\r\n          password: this.password,\r\n          level: this.level\r\n        }).then(r => {\r\n          this.loaded.close()\r\n          let data = r.data\r\n          if (data.status === 0) {\r\n            this.$message.success('登录成功，3秒后挑转~');\r\n            sessionStorage.setItem('routers', JSON.stringify(data.routers))\r\n            sessionStorage.setItem('token', data.token)\r\n            sessionStorage.setItem('level', this.level)\r\n            sessionStorage.setItem('id', data.id)\r\n            sessionStorage.setItem('name', data.name)\r\n            sessionStorage.setItem('username', this.username)\r\n            sessionStorage.setItem('phone', data.phone)\r\n            // localStorage.setItem('refreshToken', data.refreshToken)\r\n            setTimeout(() => {\r\n              let path = this.$router.prePath\r\n              if (path === '/' || path === '/register' || path === '/findPsw' || path === '/login' || !path.includes(this.level)) {//路由与身份不一致\r\n                // location.href = location.origin + '/#/' + this.level\r\n                console.log(location)\r\n                this.$router.push('/' + this.level)\r\n              } else {\r\n                // location.href = location.origin + '#' + this.$router.prePath\r\n                this.$router.push('/' + this.$router.prePath)\r\n              }\r\n            }, 3000)\r\n          } else {\r\n            this.$message.error(data.message)\r\n          }\r\n        }, err => this.$err(err))\r\n      },\r\n    },\r\n    directives: {\r\n      focus: {\r\n        inserted(el) {\r\n          // el.querySelector('input').focus()\r\n          // document.querySelector('input').focus()\r\n          el.children[0].focus()\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  a {\r\n    text-decoration: none;\r\n    color: blue;\r\n  }\r\n\r\n  .l-container {\r\n    width: 60%;\r\n    margin: 0 auto;\r\n    padding-top: 20vh;\r\n\r\n    .l-title {\r\n      text-align: center;\r\n    }\r\n\r\n    .l-username {\r\n      margin: 50px 0;\r\n    }\r\n\r\n    .l-button {\r\n      display: flex;\r\n      justify-content: space-around;\r\n      margin-top: 20px;\r\n    }\r\n\r\n    .l-radioBox {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      margin-top: 20px;\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=f7f82fd8&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=f7f82fd8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f7f82fd8\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=f7f82fd8&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=f7f82fd8&lang=less&scoped=true&\""],"sourceRoot":""}